(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{446:function(t,_,v){"use strict";v.r(_);var r=v(2),d=Object(r.a)({},(function(){var t=this,_=t._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("p",[t._v("客户端发送UNSUBSCRIBE报文给服务端，用于取消订阅主题。")]),t._v(" "),_("h3",{attrs:{id:"_3-10-1-固定报头"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-10-1-固定报头"}},[t._v("#")]),t._v(" 3.10.1 固定报头")]),t._v(" "),_("h5",{attrs:{id:"图例-3-28-unsubscribe报文固定报头"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#图例-3-28-unsubscribe报文固定报头"}},[t._v("#")]),t._v(" 图例 3.28 – UNSUBSCRIBE报文固定报头")]),t._v(" "),_("table",{staticStyle:{"text-align":"center"}},[_("tr",[_("td",{attrs:{align:"center"}},[_("strong",[t._v("Bit")])]),t._v(" "),_("td",{attrs:{align:"center"}},[_("strong",[t._v("7")])]),t._v(" "),_("td",{attrs:{align:"center"}},[_("strong",[t._v("6")])]),t._v(" "),_("td",{attrs:{align:"center"}},[_("strong",[t._v("5")])]),t._v(" "),_("td",{attrs:{align:"center"}},[_("strong",[t._v("4")])]),t._v(" "),_("td",{attrs:{align:"center"}},[_("strong",[t._v("3")])]),t._v(" "),_("td",{attrs:{align:"center"}},[_("strong",[t._v("2")])]),t._v(" "),_("td",{attrs:{align:"center"}},[_("strong",[t._v("1")])]),t._v(" "),_("td",{attrs:{align:"center"}},[_("strong",[t._v("0")])])]),t._v(" "),_("tr",[_("td",[t._v("byte 1")]),t._v(" "),_("td",{attrs:{colspan:"4",align:"center"}},[t._v("MQTT控制报文类型 (10)")]),t._v(" "),_("td",{attrs:{colspan:"4",align:"center"}},[t._v("保留位")])]),t._v(" "),_("tr",[_("td"),t._v(" "),_("td",{attrs:{align:"center"}},[t._v("1")]),t._v(" "),_("td",{attrs:{align:"center"}},[t._v("0")]),t._v(" "),_("td",{attrs:{align:"center"}},[t._v("1")]),t._v(" "),_("td",{attrs:{align:"center"}},[t._v("0")]),t._v(" "),_("td",{attrs:{align:"center"}},[t._v("0")]),t._v(" "),_("td",{attrs:{align:"center"}},[t._v("0")]),t._v(" "),_("td",{attrs:{align:"center"}},[t._v("1")]),t._v(" "),_("td",{attrs:{align:"center"}},[t._v("0")])]),t._v(" "),_("tr",[_("td",[t._v("byte 2")]),t._v(" "),_("td",{attrs:{colspan:"8",align:"center"}},[t._v("剩余长度")])])]),t._v(" "),_("p",[t._v("UNSUBSCRIBE报文固定报头的第3,2,1,0位是保留位且"),_("strong",[t._v("必须")]),t._v("分别设置为0,0,1,0。服务端"),_("strong",[t._v("必须")]),t._v("认为任何其它的值都是不合法的并关闭网络连接 [MQTT-3.10.1-1]。")]),t._v(" "),_("p",[_("strong",[t._v("剩余长度字段")])]),t._v(" "),_("p",[t._v("等于可变报头的长度加上有效载荷的长度。")]),t._v(" "),_("h3",{attrs:{id:"_3-10-2-可变报头"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-10-2-可变报头"}},[t._v("#")]),t._v(" 3.10.2 可变报头")]),t._v(" "),_("p",[t._v("可变报头包含一个报文标识符。2.3.1节提供了有关报文标识符的更多信息。")]),t._v(" "),_("h5",{attrs:{id:"图例-3-29-unsubscribe报文可变报头"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#图例-3-29-unsubscribe报文可变报头"}},[t._v("#")]),t._v(" 图例 3.29 – UNSUBSCRIBE报文可变报头")]),t._v(" "),_("table",{staticStyle:{"text-align":"center"}},[_("tr",[_("td",{attrs:{align:"center"}},[_("strong",[t._v("Bit")])]),t._v(" "),_("td",{attrs:{align:"center"}},[_("strong",[t._v("7")])]),t._v(" "),_("td",{attrs:{align:"center"}},[_("strong",[t._v("6")])]),t._v(" "),_("td",{attrs:{align:"center"}},[_("strong",[t._v("5")])]),t._v(" "),_("td",{attrs:{align:"center"}},[_("strong",[t._v("4")])]),t._v(" "),_("td",{attrs:{align:"center"}},[_("strong",[t._v("3")])]),t._v(" "),_("td",{attrs:{align:"center"}},[_("strong",[t._v("2")])]),t._v(" "),_("td",{attrs:{align:"center"}},[_("strong",[t._v("1")])]),t._v(" "),_("td",{attrs:{align:"center"}},[_("strong",[t._v("0")])])]),t._v(" "),_("tr",[_("td",[t._v("byte 1")]),t._v(" "),_("td",{attrs:{colspan:"8",align:"center"}},[t._v("报文标识符 MSB")])]),t._v(" "),_("tr",[_("td",[t._v("byte 2")]),t._v(" "),_("td",{attrs:{colspan:"8",align:"center"}},[t._v("报文标识符 LSB")])])]),t._v(" "),_("h3",{attrs:{id:"_3-10-3-有效载荷"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-10-3-有效载荷"}},[t._v("#")]),t._v(" 3.10.3 有效载荷")]),t._v(" "),_("p",[t._v("UNSUBSCRIBE报文的有效载荷包含客户端想要取消订阅的主题过滤器列表。UNSUBSCRIBE报文中的主题过滤器"),_("strong",[t._v("必须")]),t._v("是连续打包的、按照1.5.3节定义的UTF-8编码字符串 [MQTT-3.10.3-1]。")]),t._v(" "),_("p",[t._v("UNSUBSCRIBE报文的有效载荷"),_("strong",[t._v("必须")]),t._v("至少包含一个消息过滤器。没有有效载荷的UNSUBSCRIBE报文是违反协议的 [MQTT-3.10.3-2]。有关错误处理的更多信息请查看4.8节。")]),t._v(" "),_("h4",{attrs:{id:"有效载荷非规范示例"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#有效载荷非规范示例"}},[t._v("#")]),t._v(" 有效载荷非规范示例")]),t._v(" "),_("blockquote",[_("p",[_("a",{attrs:{href:"#_Figure_3.30_-"}},[t._v("图例 3.30 -有效载荷字节格式非规范示例")]),t._v(" 展示了 "),_("a",{attrs:{href:"#_Table3.6_-_Payload"}},[t._v("表格 3.7 -有效载荷非规范示例")]),t._v(" 简要描述的UNSUBSCRIBE报文的有效载荷。")])]),t._v(" "),_("h5",{attrs:{id:"表格-3-7-有效载荷非规范示例"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#表格-3-7-有效载荷非规范示例"}},[t._v("#")]),t._v(" 表格 3.7 -有效载荷非规范示例")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("主题过滤器")]),t._v(" "),_("th",[t._v("“a/b”")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("主题过滤器")]),t._v(" "),_("td",[t._v("“c/d”")])])])]),t._v(" "),_("h5",{attrs:{id:"图例-3-30-有效载荷字节格式非规范示例"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#图例-3-30-有效载荷字节格式非规范示例"}},[t._v("#")]),t._v(" 图例 3.30 -有效载荷字节格式非规范示例")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th"),t._v(" "),_("th",[_("strong",[t._v("描述")])]),t._v(" "),_("th",[_("strong",[t._v("7")])]),t._v(" "),_("th",[_("strong",[t._v("6")])]),t._v(" "),_("th",[_("strong",[t._v("5")])]),t._v(" "),_("th",[_("strong",[t._v("4")])]),t._v(" "),_("th",[_("strong",[t._v("3")])]),t._v(" "),_("th",[_("strong",[t._v("2")])]),t._v(" "),_("th",[_("strong",[t._v("1")])]),t._v(" "),_("th",[_("strong",[t._v("0")])])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("主题过滤器")]),t._v(" "),_("td"),t._v(" "),_("td"),t._v(" "),_("td"),t._v(" "),_("td"),t._v(" "),_("td"),t._v(" "),_("td"),t._v(" "),_("td"),t._v(" "),_("td"),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("byte 1")]),t._v(" "),_("td",[t._v("Length MSB (0)")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")])]),t._v(" "),_("tr",[_("td",[t._v("byte 2")]),t._v(" "),_("td",[t._v("Length LSB (3)")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("1")]),t._v(" "),_("td",[t._v("1")])]),t._v(" "),_("tr",[_("td",[t._v("byte 3")]),t._v(" "),_("td",[t._v("‘a’ (0x61)")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("1")]),t._v(" "),_("td",[t._v("1")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("1")])]),t._v(" "),_("tr",[_("td",[t._v("byte 4")]),t._v(" "),_("td",[t._v("‘/’ (0x2F)")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("1")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("1")]),t._v(" "),_("td",[t._v("1")]),t._v(" "),_("td",[t._v("1")]),t._v(" "),_("td",[t._v("1")])]),t._v(" "),_("tr",[_("td",[t._v("byte 5")]),t._v(" "),_("td",[t._v("‘b’ (0x62)")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("1")]),t._v(" "),_("td",[t._v("1")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("1")]),t._v(" "),_("td",[t._v("0")])]),t._v(" "),_("tr",[_("td",[t._v("主题过滤器")]),t._v(" "),_("td"),t._v(" "),_("td"),t._v(" "),_("td"),t._v(" "),_("td"),t._v(" "),_("td"),t._v(" "),_("td"),t._v(" "),_("td"),t._v(" "),_("td"),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",[t._v("byte 6")]),t._v(" "),_("td",[t._v("Length MSB (0)")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")])]),t._v(" "),_("tr",[_("td",[t._v("byte 7")]),t._v(" "),_("td",[t._v("Length LSB (3)")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("1")]),t._v(" "),_("td",[t._v("1")])]),t._v(" "),_("tr",[_("td",[t._v("byte 8")]),t._v(" "),_("td",[t._v("‘c’ (0x63)")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("1")]),t._v(" "),_("td",[t._v("1")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("1")]),t._v(" "),_("td",[t._v("1")])]),t._v(" "),_("tr",[_("td",[t._v("byte 9")]),t._v(" "),_("td",[t._v("‘/’ (0x2F)")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("1")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("1")]),t._v(" "),_("td",[t._v("1")]),t._v(" "),_("td",[t._v("1")]),t._v(" "),_("td",[t._v("1")])]),t._v(" "),_("tr",[_("td",[t._v("byte 10")]),t._v(" "),_("td",[t._v("‘d’ (0x64)")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("1")]),t._v(" "),_("td",[t._v("1")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("1")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("0")])])])]),t._v(" "),_("h3",{attrs:{id:"_3-10-4-响应"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-10-4-响应"}},[t._v("#")]),t._v(" 3.10.4 响应")]),t._v(" "),_("p",[t._v("UNSUBSCRIBE报文提供的主题过滤器（无论是否包含通配符）"),_("strong",[t._v("必须")]),t._v("与服务端持有的这个客户端的当前主题过滤器集合逐个字符比较。如果有任何过滤器完全匹配，那么它（服务端）自己的订阅将被删除，否则不会有进一步的处理 [MQTT-3.10.4-1]。")]),t._v(" "),_("p",[t._v("如果服务端删除了一个订阅：")]),t._v(" "),_("ul",[_("li",[t._v("它"),_("strong",[t._v("必须")]),t._v("停止分发任何新消息给这个客户端 [MQTT-3.10.4-2]。")]),t._v(" "),_("li",[t._v("它"),_("strong",[t._v("必须")]),t._v("完成分发任何已经开始往客户端发送的QoS 1和QoS 2的消息 [MQTT-3.10.4-3]。")]),t._v(" "),_("li",[t._v("它"),_("strong",[t._v("可以")]),t._v("继续发送任何现存的准备分发给客户端的缓存消息。")])]),t._v(" "),_("p",[t._v("服务端"),_("strong",[t._v("必须")]),t._v("发送UNSUBACK报文响应客户端的UNSUBSCRIBE请求。UNSUBACK报文"),_("strong",[t._v("必须")]),t._v("包含和UNSUBSCRIBE报文相同的报文标识符 [MQTT-3.10.4-4]。即使没有删除任何主题订阅，服务端也"),_("strong",[t._v("必须")]),t._v("发送一个UNSUBACK响应 [MQTT-3.10.4-5]。")]),t._v(" "),_("p",[t._v("如果服务端收到包含多个主题过滤器的UNSUBSCRIBE报文，它"),_("strong",[t._v("必须")]),t._v("如同收到了一系列的多个UNSUBSCRIBE报文一样处理那个报文，除了将它们的响应合并到一个单独的UNSUBACK报文外。 [MQTT-3.10.4-6]。")])])}),[],!1,null,null,null);_.default=d.exports}}]);